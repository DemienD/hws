# Задание: Сервис для хранения заметок (REST API)

## Описание
Необходимо разработать REST API сервис для хранения и управления заметками. Сервис должен обеспечивать базовые CRUD операции над заметками, а также поиск по содержимому (будет полезно использование [оператора LIKE в PostgreSQL](https://postgrespro.ru/docs/postgresql/9.6/functions-matching)).

Сервер должен собираться из `cmd/server`, и в качестве аргументов принимать две строки:
  1. Адрес, который используется для прослушивания, например `localhost:8080`.
  2. Строка подключения (DSN) к БД, например `postgres://go_user:go_password@localhost:5432/go_db?sslmode=disable`

## Технические требования

###  Базовые требования
- Приложение должно использовать PostgreSQL для хранения данных, поддержка других СУБД не требуется
- API должно возвращать и принимать данные в формате JSON
- Должна быть реализована корректная обработка ошибок
- Сервис должен сам создавать необходимые 
пустые таблицы, если их нет в БД.

###  API Endpoints

####  Получение заметки по ID
```
GET /api/v1/notes/{id}
```
- Статус код: 200 OK при успехе
- Статус код: 404 Not Found, если заметка не найдена
- Результат должен содержать полную информацию о заметке

####  Создание новой заметки
```
POST /api/v1//notes
```
- Content-Type: application/json
- Тело запроса: JSON объект с полями `title` и `content`
- Статус код: 201 Created при успехе
- Результат должен содержать ID созданной заметки

#### Обновление заметки
```
PUT /api/v1/notes/{id}
```
- Content-Type: application/json
- Тело запроса: JSON объект с полями `title` или `content`
- Статус код: 200 OK при успехе
- Статус код: 404 Not Found, если заметка не найдена

####  Удаление заметки
```
DELETE /api/v1/notes/{id}
```
- Статус код: 200 OK при успехе
- Статус код: 404 Not Found, если заметка не найдена

####  Поиск заметок по содержимому
```
GET /api/v1/notes/search?q={поисковый_запрос}
```
- Статус код: 200 OK
- Результат должен содержать список заметок, в которых встречается поисковый запрос

### Структура данных

####  Заметка (Note)
```json
{
    "id": 1,
    "title": "Заголовок заметки",
    "content": "Содержимое заметки",
}
```

####  Множество заметок для Search API
```json
{
    "search_result": [
        {
            "id": 1,
            "title": "Заголовок заметки 1",
            "content": "Содержимое заметки 1",
        },
        {
            "id": 2,
            "title": "Заголовок заметки 2",
            "content": "Содержимое заметки 2",
        }
    ]
}
```

####  Запрос на создание/обновление/удаление заметки
```json
{
    "id": 0,
    "title": "Заголовок заметки",
    "content": "Содержимое заметки"
}
```

Здесь поле `"id"` является обязательным только для изменения 
или удаления заметки.

Поля `"title"` и `"content"` - обязательны для создания заметки,
при изменении заметки отсутствующее поле не должно изменяться.



### Обработка ошибок

Запрос должен возвращать статусы:

  - 200 (OK) или 201 (Created) - в случае успеха
  - 404 (NotFound) - при неправильном URL в запросе
  - 405 (MethodNotAllowed) - при неправильном типе запроса
  - 400 (BadRequest) - если данные в запросе некорректны
  - 500 (InternalError) - во всех остальных случаях.


## Пример использования - полный жизненный цикл заметки

1. Создание заметки с заголовком "Тестовая заметка" и содержимым "Содержимое тестовой заметки"
2. Получение созданной заметки по ID
3. Обновление заметки: новый заголовок "Обновленная заметка" и содержимое "Обновленное содержимое заметки"
4. Поиск заметки по тексту "Обновленное"
5. Удаление заметки

## Советы по реализации

1. Разделите логику на слои: контроллеры (HTTP), сервисы, репозитории
2. Используйте готовые библиотеки для работы с базой данных
3. Не забывайте о валидации входных данных 
4. Для локального запуска PostgreSQL можно использовать `docker compose`